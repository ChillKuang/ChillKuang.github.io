<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>35 Buddhas</title>
</head>
<body>
<form action="/action_page.php">
  
  <label for="fname">Count:</label>
  <input type="text" id="timeCount" name="timeCount"><br><br>
  <button onclick="addCount()">Submit Count</button>
</form>

<div style="padding:56.25% 0 0 0;position:relative;">

<iframe id="video1" src="https://player.vimeo.com/video/611371552?h=51b608e7d1&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;" title="三十五佛懺正行">
</iframe>

</div>

<script src="https://player.vimeo.com/api/player.js"></script>

<script>
//Code included inside $( document ).ready() will only run once the page Document Object Model (DOM) is ready for JavaScript code to execute.

var iframe = document.querySelector('iframe');
var player = new Vimeo.Player(iframe);
var countPlay  = 0;
var reaptedTimes = 1;

function addCount(){
  reaptedTimes = document.getElementById('timeCount').value;
}

player.on('cuepoint', function(data) {
    countPlay += 1;
    if (countPlay == reaptedTimes){
      player.setLoop(false);
    }
        console.log("start:" + data.time);
        console.log("times:" + countPlay);
    });

player.addCuePoint(0, {
  customKey: 'customValue'
}).then(function(id) {
  // The cue point is added
}).catch(function(error) {
  switch (error.name) {
      case 'UnsupportedError':
          // Cue points aren't supported by the current player or browser
          break;

      case 'RangeError':
          // The time is less than 0 or greater than the video's duration
          break;

      default:
          // Some other error occurred
          break;
  }
});

</script>

</body>
</html>
